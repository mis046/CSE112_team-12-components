<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: packages/jj-input-number/tests/jj-input-number_test.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: packages/jj-input-number/tests/jj-input-number_test.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import {expect, assert} from 'chai';
import '../jj-input-number.js';

/**
 * Triggers a mouse event so that we can simulate mousedown, mouseup,
 * mouseenter, etc...
 *
 * Source: https://stackoverflow.com/questions/24025165/simulating-a-mousedown-click-mouseup-sequence-in-tampermonkey
 */
function triggerMouseEvent (node, eventType) {
    var clickEvent = document.createEvent ('MouseEvents');
    clickEvent.initEvent (eventType, true, true);
    node.dispatchEvent (clickEvent);
}

function wait(ms){                                                              
    var start = new Date().getTime();                                             
    var end = start;                                                              
    while(end &lt; start + ms) {                                                     
        end = new Date().getTime();                                                 
    }                                                                              
}  

//----------Unit Tests ------------------
describe('jj-input-number with defined [min, max, value, precision, step]', function() {

  let compHTML;
  let compEl;

  before(function() {
    // runs before all tests in this block
    //place component into DOM, get the element by id
    compHTML = `&lt;jj-input-number id="jj1" min=0 max=8 value=1 precision=2 step=0.5>&lt;/jj-input-number>`;
    document.body.insertAdjacentHTML('afterbegin',compHTML);
    compEl = document.getElementById('jj1');
  });

  it('tests correct init value', function() {
    let compVal = compEl.value;
    assert.equal(compVal, 1);
  });

  it('tests correct min value', function() {
    let compMin = compEl.getAttribute("min");
    assert.equal(compMin, 0);
  });

  it('tests correct max value', function() {
    let compMax = compEl.getAttribute("max");
    assert.equal(compMax, 8);
  });

  it('tests correct precision value', function() {
    let compPrecision = compEl.precision;
    assert.equal(compPrecision, 2);
  });

  it('tests correct step value', function() {
    let compStep = compEl.step;
    assert.equal(compStep, 0.5);
  });

  it('tests increment button increases inner value', function() {
    //currently value = 1.00 (see above)

    //go into shadow dom of component, find inc button
    //trigger inc click x1
    let incButton = document.getElementById('jj1').shadowRoot.getElementById("incrementBtn");
    triggerMouseEvent(incButton, 'mousedown');
    triggerMouseEvent(incButton, 'mouseup');
    //get value in the input textbox
    let compValue = document.getElementById('jj1').shadowRoot.getElementById('jj-inputBoxNum').value; 
    assert.equal(compValue, 1.50);

    //trigger inc click x2
    incButton = document.getElementById('jj1').shadowRoot.getElementById("incrementBtn");
    triggerMouseEvent(incButton, 'mousedown');
    triggerMouseEvent(incButton, 'mouseup');
    //must recheck the value again in shadowDOM, otherwise it won't update
    compValue = document.getElementById('jj1').shadowRoot.getElementById('jj-inputBoxNum').value;
    assert.equal(compValue, 2.00);
    //set back to default for other tests
    document.getElementById('jj1').shadowRoot.getElementById('jj-inputBoxNum').value = 1.0;
  })

  it('tests decrement buttons decreases the inner value', function() {
    //currently value = 1.00 (see above)

    //go into shadow dom of component, find dec button
    //trigger dec click x1
    let decButton = document.getElementById('jj1').shadowRoot.getElementById("decrementBtn");
    triggerMouseEvent(decButton, 'mousedown');
    triggerMouseEvent(decButton, 'mouseup');
    //get value in the input textbox
    let compValue = compEl.value;
    assert.equal(compValue, 1.50);

    //trigger dec click x2
    decButton = document.getElementById('jj1').shadowRoot.getElementById("decrementBtn");
    triggerMouseEvent(decButton, 'mousedown');
    triggerMouseEvent(decButton, 'mouseup');

    //must recheck the value again in shadowDOM, otherwise it won't update
    compValue = compEl.value;
    assert.equal(compValue, 1.00);
    //set back to default for other tests
    compEl.value = 1.0;
  })
 
  it('tests if we can decrease jj-input-number with "disabled" _boolean attribue_', function() {
    let savedDisabledValue = compEl.getAttribute('disabled'); // Save disabled value.
    compEl.setAttribute('disabled', ''); // Set the component as disabled.

    let oldValue = compEl.value;
    let decButton = document.getElementById('jj1').shadowRoot.getElementById("decrementBtn");
    triggerMouseEvent(decButton, 'mousedown');
    triggerMouseEvent(decButton, 'mouseup');

    assert.equal(compEl.value, oldValue);

    // reset disable value.
    if (savedDisabledValue == null) {
      compEl.removeAttribute('disabled');
    } else {
      compEl.setAttribute('disabled', savedDisabledValue);
    }
  });

  it('tests if we can increase jj-input-number with "disabled" _boolean attribue_', function() {
    //compEl.removeAttribute('disabled');
    let savedDisabledValue = compEl.getAttribute('disabled'); // Save disabled value.
    compEl.setAttribute('disabled', ''); // Set the component as disabled.

    let incButton = document.getElementById('jj1').shadowRoot.getElementById("incrementBtn");
    let oldValue = compEl.value;

    triggerMouseEvent(incButton, 'mousedown');
    triggerMouseEvent(incButton, 'mouseup');

    assert.equal(compEl.value, oldValue);

    // reset disable value.
    if (savedDisabledValue == null) {
      compEl.removeAttribute('disabled');
    } else {
      compEl.setAttribute('disabled', savedDisabledValue);
    }
  });

  it('tests if we can decrease when jj-input-number using "disabled" attribue', function() {
    let savedDisabledValue = compEl.getAttribute('disabled');

    compEl.setAttribute('disabled', 'true'); // Set the component as disabled.
    let oldValue = compEl.value;
    
    let decButton = document.getElementById('jj1').shadowRoot.getElementById("decrementBtn");
    triggerMouseEvent(decButton, 'mousedown');
    triggerMouseEvent(decButton,'mouseup');
    assert.equal(compEl.value, oldValue);

    // reset disable value.
    if (savedDisabledValue == null) {
      compEl.removeAttribute('disabled');
    } else {
      compEl.setAttribute('disabled', savedDisabledValue);
    }
  });

 it('tests if we can increase when jj-input-number using "disabled" attribue', function() {
   let savedDisabledValue = compEl.getAttribute('disabled');

   compEl.setAttribute("disabled", "true"); // Set the component as disabled.

   let incButton = document.getElementById('jj1').shadowRoot.getElementById("incrementBtn");
   let oldValue = compEl.value;

   triggerMouseEvent(incButton, 'mousedown');
   triggerMouseEvent(incButton,'mouseup');
   assert.equal(compEl.value, oldValue);

   // reset disable value.
   if (savedDisabledValue == null) {
       compEl.removeAttribute('disabled');
   } else {
       compEl.setAttribute('disabled', savedDisabledValue);
   }
 });
    //etc..
});

</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="CoreHello.html">CoreHello</a></li></ul><h3>Global</h3><ul><li><a href="global.html#jjInputNum">jjInputNum</a></li><li><a href="global.html#jjSlider">jjSlider</a></li><li><a href="global.html#triggerMouseEvent">triggerMouseEvent</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.2</a> on Tue Jun 04 2019 16:36:20 GMT-0700 (Pacific Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
